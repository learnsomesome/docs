# é—­åŒ…

> **JS ä¸­å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘**
>
> å‡½æ•°å¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„**å‚æ•°**ï¼Œä¹Ÿå¯ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„**è¿”å›å€¼**æ¥ä½¿ç”¨

> **é«˜é˜¶å‡½æ•°**
>
> - **filter**ï¼šè¿‡æ»¤
> - **map**ï¼šæ˜ å°„
> - **reduce**ï¼šç´¯è®¡
> - **find/findIndex**ï¼šæŸ¥æ‰¾
> - **forEach**ï¼šè¿­ä»£ 

#### å®šä¹‰

> MDNï¼š**ä¸€ä¸ªå‡½æ•°**å’Œ**å¯¹å…¶å‘¨å›´çŠ¶æ€ï¼ˆè¯æ³•ç¯å¢ƒï¼‰çš„å¼•ç”¨**æ†ç»‘åœ¨ä¸€èµ·ï¼Œè¿™æ ·çš„**ç»„åˆ**å°±æ˜¯é—­åŒ…

**ä¸€ä¸ªå‡½æ•°å¦‚æœå®ƒæœ‰è®¿é—®å¤–å±‚ä½œç”¨åŸŸçš„è‡ªç”±å˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°ä¸å…¶å¯æ•è·åˆ°çš„å¤–å±‚è‡ªç”±å˜é‡çš„ç»„åˆå°±æ˜¯é—­åŒ…**

#### é—­åŒ…çš„æ‰§è¡Œè¿‡ç¨‹

> ğŸ¤” æ€è€ƒä»¥ä¸‹ä»£ç åœ¨å†…å­˜ä¸­çš„æ‰§è¡Œè¿‡ç¨‹

```javascript
function bar() {
    var name = "curry";
    function foo() {
        console.log(name);
    }
    
    return foo;
}

var fn = bar();
fn(); // curry
```

<img src="_media/assets/javascript/closure/é—­åŒ…æ‰§è¡Œè¿‡ç¨‹.PNG" alt="é—­åŒ…æ‰§è¡Œè¿‡ç¨‹" />

> â“ æ­¤æ—¶é—­åŒ…ä¸º

**æ­¤æ—¶ name å˜é‡å’Œ foo å‡½æ•°çš„ç»„åˆå°±æ˜¯é—­åŒ…**

> â“ ä¸ºä»€ä¹ˆ bar å‡½æ•°æ‰§è¡Œå®Œè¢«é”€æ¯åï¼Œä»èƒ½è¯»å–åˆ° name å˜é‡

```javascript
var fn = bar(); 
/* 
** æ­¤æ—¶ fn å˜é‡å­˜ç€ foo å‡½æ•°çš„å†…å­˜åœ°å€ï¼Œå¼•ç”¨æŒ‡å‘ foo å‡½æ•°å¯¹è±¡
** è€Œ foo å‡½æ•°å¯¹è±¡å†…çš„çˆ¶çº§ä½œç”¨åŸŸå­˜ç€ bar å‡½æ•° AO å¯¹è±¡çš„å†…å­˜åœ°å€ï¼Œå¼•ç”¨æŒ‡å‘ bar å‡½æ•° AO å¯¹è±¡
** æ‰€ä»¥ bar å‡½æ•°çš„ AO å¯¹è±¡å› æ²¿æ ¹å¯¹è±¡ä»åœ¨å¼•ç”¨è·¯å¾„ï¼Œæ•…æœªè¢« GC é”€æ¯ï¼Œä»å¯è¯»å–åˆ°å…¶ä¸­æ‰€å­˜å‚¨çš„ name å˜é‡
*/
```

#### é—­åŒ…çš„å†…å­˜æ³„æ¼

> â“ ä¸ºä»€ä¹ˆä¼šé€ æˆå†…å­˜æ³„æ¼

**fn å‡½æ•°æ‰§è¡Œå®Œåï¼Œè‡ªèº«å‡½æ•°å¯¹è±¡ä¸æ‰€å¼•ç”¨çš„çˆ¶çº§ä½œç”¨åŸŸ AO å¯¹è±¡æœªè¢«é”€æ¯ï¼Œä»å ç”¨å†…å­˜** 

> â“ å¦‚ä½•è§£å†³

```javascript
fn = null;
// fn å¼•ç”¨æŒ‡å‘ä¸ºç©º
```

> â“ AO å¯¹è±¡ä¸­æ‰€æœ‰è‡ªç”±å˜é‡æ˜¯å¦éƒ½ä¸ä¼šè¢«é”€æ¯

**AO å¯¹è±¡ä¸­æœªè¢«ä½¿ç”¨çš„è‡ªç”±å˜é‡ä¼šè¢«é”€æ¯**
